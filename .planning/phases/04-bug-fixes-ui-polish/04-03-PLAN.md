---
phase: 04-bug-fixes-ui-polish
plan: 03
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - frontend/lib/screens/*.dart
autonomous: true

must_haves:
  truths:
    - "All colors come from VlvtColors constants"
    - "All typography uses VlvtTextStyles"
    - "All spacing uses Spacing constants"
    - "All buttons use VlvtButton variants"
    - "All inputs use VlvtInput"
  artifacts:
    - path: "frontend/lib/screens/chat_screen.dart"
      provides: "Design system compliant UI"
      contains: "VlvtColors"
  key_links:
    - from: "screens/*.dart"
      to: "theme/vlvt_colors.dart"
      via: "import"
      pattern: "import.*vlvt_colors"
---

<objective>
Enforce design system consistency across all screens

Purpose: Visual design is uniform - same colors, typography, spacing, and components everywhere
Output: All screens use VlvtColors, VlvtTextStyles, Spacing constants, and VLVT widgets
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/04-bug-fixes-ui-polish/04-CONTEXT.md
@.planning/phases/04-bug-fixes-ui-polish/04-RESEARCH.md
@.planning/phases/04-bug-fixes-ui-polish/04-AUDIT.md
@.planning/phases/04-bug-fixes-ui-polish/04-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix Color and Typography Violations</name>
  <files>from 04-AUDIT.md design system violations</files>
  <action>
Based on 04-AUDIT.md findings, fix all hardcoded colors and typography:

**Color replacements:**
- `Color(0xFF...)` -> `VlvtColors.[appropriate]`
- `Colors.white` -> `VlvtColors.textPrimary` (for text) or use opacity helpers
- `Colors.grey` -> `VlvtColors.textSecondary` or `VlvtColors.textMuted`
- `Colors.red` -> `VlvtColors.crimson` or `VlvtColors.error`
- `Colors.black` -> `VlvtColors.background` or `VlvtColors.surface`
- `withOpacity()` -> `withValues(alpha:)` (Flutter 3.27+)

**Typography replacements:**
- `TextStyle(fontSize: ..., fontWeight: ...)` -> `VlvtTextStyles.[h1-h4, bodyLarge, bodyMedium, bodySmall, caption, button]`
- Custom font families -> Use VlvtTextStyles which includes Playfair Display and Montserrat

Reference VlvtColors available:
- Backgrounds: background, surface, surfaceElevated, surfaceInput
- Primary: primary, primaryLight, primaryDark
- Gold: gold, goldLight, goldDark
- Accents: crimson, success, warning, info, error
- Text: textPrimary, textSecondary, textMuted, textOnGold, textOnPrimary

Reference VlvtTextStyles available:
- Headers: h1, h2, h3, h4
- Body: bodyLarge, bodyMedium, bodySmall
- Other: caption, button, overline
  </action>
  <verify>
Search for hardcoded colors: `grep -r "Color(0x" frontend/lib/screens/` returns fewer results than before
  </verify>
  <done>No hardcoded colors or text styles in screens - all use design system constants</done>
</task>

<task type="auto">
  <name>Task 2: Fix Spacing and Component Violations</name>
  <files>from 04-AUDIT.md design system violations</files>
  <action>
Fix remaining design system violations:

**Spacing replacements:**
- `SizedBox(height: 4)` -> `Spacing.verticalXs` or `const SizedBox(height: Spacing.xs)`
- `SizedBox(height: 8)` -> `Spacing.verticalSm`
- `SizedBox(height: 16)` -> `Spacing.verticalMd`
- `SizedBox(height: 24)` -> `Spacing.verticalLg`
- `SizedBox(height: 32)` -> `Spacing.verticalXl`
- `EdgeInsets.all(16)` -> `Spacing.paddingMd`
- `EdgeInsets.symmetric(horizontal: 16)` -> `Spacing.horizontalPaddingMd`

**Component replacements:**
- `ElevatedButton` -> `VlvtButton.primary()`
- `TextButton` -> `VlvtButton.text()`
- `OutlinedButton` -> `VlvtButton.secondary()`
- `TextField` -> `VlvtInput`
- `CircularProgressIndicator` -> `VlvtProgressIndicator` or `VlvtLoader`

Ensure imports are present:
- `import '../constants/spacing.dart';`
- `import '../widgets/vlvt_button.dart';`
- `import '../widgets/vlvt_input.dart';`
- `import '../widgets/vlvt_loader.dart';`
  </action>
  <verify>
`flutter analyze` passes with no errors
  </verify>
  <done>All screens use Spacing constants and VLVT widgets consistently</done>
</task>

</tasks>

<verification>
- [ ] No `Color(0xFF...)` patterns in screens (use VlvtColors)
- [ ] No `TextStyle(fontSize: ...)` patterns (use VlvtTextStyles)
- [ ] No hardcoded numeric spacing (use Spacing constants)
- [ ] No native Flutter buttons (use VlvtButton)
- [ ] No native TextField (use VlvtInput)
- [ ] `flutter analyze` passes
</verification>

<success_criteria>
All screens follow design system:
1. Colors reference VlvtColors constants
2. Typography uses VlvtTextStyles
3. Spacing uses Spacing constants
4. Buttons use VlvtButton variants
5. Inputs use VlvtInput
</success_criteria>

<output>
After completion, create `.planning/phases/04-bug-fixes-ui-polish/04-03-SUMMARY.md`
</output>
